(this["webpackJsonpcurrency-exchange"]=this["webpackJsonpcurrency-exchange"]||[]).push([[0],{24:function(e,t,n){e.exports=n(37)},29:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),u=(n(29),n(6)),i=n(7),l=n(2),s=n(3);function m(){var e=Object(l.a)([""]);return m=function(){return e},e}var d=function(e){switch(e){case"outline":return"bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded";default:return"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}},f=s.a.button.attrs((function(e){return{className:d(e.type)}}))(m());function p(){var e=Object(l.a)([""]);return p=function(){return e},e}s.a.nav(p());function E(){var e=Object(l.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translateX(-50%) translateY(-50%);\n"]);return E=function(){return e},e}var b=s.a.div(E()),v=function(){return r.a.createElement(b,null,r.a.createElement(f,{as:u.b,to:"/welcome",className:"block m-2"},"Start"))},h=function(){return r.a.createElement(b,null,r.a.createElement("header",null,r.a.createElement("h1",{className:"text-4xl pb-2"},"Welcome to Currency Exchange")),r.a.createElement("section",{className:"text-center p-2"},r.a.createElement("p",null,"Please select your preferred Currency in settings."),r.a.createElement("p",null,"We have set it ourselves to EUR and credited your account some initial fund to play with the app"),r.a.createElement("small",{className:"block italic"},"P.S. This fund can not be used to do any real purchase")),r.a.createElement(f,{as:u.b,to:"/exchange",className:"m-2 inline-block"},"Exchange"))},g=n(15),y=n.n(g),O=n(23),C=n(8),j=n(1),x={currency:"EUR",loading:!1,rates:{}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"RATES_LOADING":return Object(j.a)({},e,{loading:!0});case"RATES_RECEIVED":return Object(j.a)({},e,{loading:!1},a);case"BASE_CURRENCY_CHANGED":return Object(j.a)({},e,{},a);default:return e}},N={RATES:"/latest",CURRENCIES:"/currencies"},S="//api.frankfurter.app",T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a="".concat(S).concat(e),r=new Headers;r.append("Content-Type","application/json");var c={method:t,headers:r};return["POST","PUT"].includes(t)&&(c.body="string"!==typeof n?JSON.stringify(n):n),fetch(a,c).then((function(e){return 204===e.status?{}:e.json()}))},D=function(e){return T(e,"GET")},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};e&&(t.from=e);var n=new URLSearchParams(t);return D("".concat(N.RATES,"?").concat(n.toString()))},w={base:"EUR",poll:1e4},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SETTINGS_UPDATED":return Object(j.a)({},e,{},a);default:return e}},_=r.a.createContext({settings:w,updateSettings:function(){}}),k=_.Provider,P=(_.Consumer,function(e){var t=e.children,n=Object(a.useReducer)(U,w),c=Object(C.a)(n,2),o=c[0],u=c[1],i={settings:o,updateSettings:function(e){u({type:"SETTINGS_UPDATED",payload:e})}};return r.a.createElement(k,{value:i},t)}),B=_,Y=r.a.createContext(Object(j.a)({},x,{updateBaseCurrency:function(){}})),G=Y.Provider,I=(Y.Consumer,function(e){var t=e.children,n=Object(a.useContext)(B).settings,c=Object(a.useState)(n.base),o=Object(C.a)(c,2),u=o[0],i=o[1],l=Object(a.useReducer)(A,x),s=Object(C.a)(l,2),m=s[0],d=s[1],f=Object(a.useRef)(0);return Object(a.useEffect)((function(){var e=function(){f.current=setTimeout(t,n.poll)},t=function(){d({type:"RATES_LOADING"}),Object(O.a)(y.a.mark((function t(){var n,a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(u);case 2:n=t.sent,a=n.rates,r=void 0===a?{}:a,e(),d({type:"RATES_RECEIVED",payload:{rates:r,currency:u}});case 7:case"end":return t.stop()}}),t)})))()};return t(),function(){f.current&&clearTimeout(f.current)}}),[n.poll,u]),r.a.createElement(G,{value:Object(j.a)({},m,{updateBaseCurrency:i})},t)}),z=Y;function H(){var e=Object(l.a)(["\n  max-width: 320px;\n  padding: 1rem 0;\n  border: 1px solid #efefef;\n  border-radius: 10px;\n  box-shadow: 0 0 10px 0 rgba(100, 100, 100, 0.3);\n"]);return H=function(){return e},e}var W=s.a.div(H());function M(){var e=Object(l.a)(["\n  --size: 1.8rem;\n  width: var(--size);\n  height: var(--size);\n  line-height: var(--size);\n  border-radius: 50%;\n  position: absolute;\n  padding: 0;\n  left: 0;\n"]);return M=function(){return e},e}function V(){var e=Object(l.a)(["\n  border: 1px solid #dfdfdf;\n  outline: none;\n  border-radius: 1rem;\n  padding: 0 0.5rem;\n  background: white;\n  transform: translateY(-50%);\n  margin-left: 15%;\n  &:focus,\n  &:active {\n    outline: none;\n    box-shadow: 0 0 5px 0 rgba(100, 100, 100, 0.2);\n  }\n"]);return V=function(){return e},e}function J(){var e=Object(l.a)(["\n  position: relative;\n  height: 1px;\n  margin: 2rem 0;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  background: #dfdfdf;\n"]);return J=function(){return e},e}var L=s.a.div(J()),X=s.a.button(V()),F=Object(s.a)(X)(M()),$=function(e){var t=e.values,n=e.onSwitchClick;return r.a.createElement(L,{"data-testid":"separator"},r.a.createElement(F,{onClick:function(){return n()},"data-testid":"separator-switch-button"},"\u21c5"),r.a.createElement(X,null,t.from," \u2192 ",t.to))};function q(){var e=Object(l.a)(["\n  appearance: none;\n  -moz-appearance: none;\n  -webkit-appearance: none;\n  background: transparent;\n"]);return q=function(){return e},e}var K=s.a.select(q()),Q=function(e){var t=e.currencies,n=e.value,a=void 0===n?"":n,c=e.onChange,o=void 0===c?function(){}:c;return r.a.createElement("div",null,r.a.createElement(K,{"data-testid":"currency-select",defaultValue:a,onChange:function(e){var t=e.target.value;return o(t)}},t.map((function(e){return r.a.createElement("option",{key:e},e)}))))};function Z(){var e=Object(l.a)(['\n  text-align: right;\n  position: relative;\n  &:before {\n    content: "-";\n    position: absolute;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n']);return Z=function(){return e},e}var ee=s.a.input(Z()),te=function(e){return r.a.createElement("div",null,r.a.createElement(ee,Object.assign({type:"tel",placeholder:"0"},e,{"data-testid":"amount-input"})))};function ne(){var e=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  margin: 0.5rem;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  & > * {\n    flex: 1 auto;\n    width: 50%;\n\n    & > * {\n      font-size: 2rem;\n      max-width: 100%;\n      display: block;\n      background: transparent;\n      outline: none;\n    }\n  }\n"]);return ne=function(){return e},e}var ae=s.a.div(ne()),re=function(e){var t=e.state,n=e.currencies,a=e.onCurrencyChange,c=void 0===a?function(){}:a,o=e.onAmountChange,u=void 0===o?function(){}:o,i=t.amount?Number(t.amount.toFixed(2)):"";return r.a.createElement(ae,{"data-testid":"exchange-participant"},r.a.createElement(Q,{key:t.currency,value:t.currency,currencies:n,onChange:c}),r.a.createElement(te,{key:t.amount||0,defaultValue:i,onChange:function(e){var t=Number(e.target.value);isNaN(t)||u(t)}}))},ce={from:{amount:null,currency:"EUR"},to:{amount:null,currency:"GBP"},rate:null},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=void 0===a?{}:a,c=r.value,o=e.rate||0;switch(n){case"EXCHANGE_SWITCHED":return Object(j.a)({},e,{from:e.to,to:e.from});case"BASE_CURRENCY_UPDATED":return Object(j.a)({},e,{to:e.to.currency===c?{amount:e.to.amount,currency:e.from.currency}:e.to,from:Object(j.a)({},e.from,{currency:c})});case"SECONDARY_CURRENCY_UPDATED":return Object(j.a)({},e,{from:e.from.currency===c?{amount:e.from.amount,currency:e.to.currency}:e.from,to:Object(j.a)({},e.to,{currency:c})});case"BASE_AMOUNT_UPDATED":return Object(j.a)({},e,{from:Object(j.a)({},e.from,{amount:isNaN(c)?0:c}),to:Object(j.a)({},e.to,{amount:o?c*o:e.to.amount})});case"SECONDARY_AMOUNT_UPDATED":return Object(j.a)({},e,{to:Object(j.a)({},e.to,{amount:isNaN(c)?0:c}),from:Object(j.a)({},e.from,{amount:o?c/o:e.from.amount})});case"RATES_UPDATED":return Object(j.a)({},e,{rate:r.rates[e.to.currency]||o});default:return e}},ue=function(e){var t=e.currencies,n=Object(a.useContext)(z),c=Object(a.useContext)(B).settings,o=Object(a.useReducer)(oe,Object(j.a)({},ce,{from:{currency:c.base,amount:null}})),u=Object(C.a)(o,2),i=u[0],l=u[1];Object(a.useEffect)((function(){l({type:"RATES_UPDATED",payload:{rates:n.rates}})}),[n]);var s=Object.keys(t);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null,r.a.createElement(W,null,r.a.createElement(re,{state:i.from,currencies:s,onCurrencyChange:function(e){n.updateBaseCurrency(e),l({type:"BASE_CURRENCY_UPDATED",payload:{value:e}})},onAmountChange:function(e){l({type:"BASE_AMOUNT_UPDATED",payload:{value:e}})}}),r.a.createElement($,{values:{from:"".concat(t[i.from.currency]," 1"),to:"".concat(t[i.to.currency]," ").concat(i.rate)},onSwitchClick:function(){l({type:"EXCHANGE_SWITCHED"})}}),r.a.createElement(re,{state:i.to,currencies:s,onCurrencyChange:function(e){l({type:"SECONDARY_CURRENCY_UPDATED",payload:{value:e}})},onAmountChange:function(e){l({type:"SECONDARY_AMOUNT_UPDATED",payload:{value:e}})}}),r.a.createElement(f,{className:"m-2 inline-block"},"Exchange"))))},ie={EUR:"\u20ac",GBP:"\xa3",USD:"$"},le=function(){return r.a.createElement(I,null,r.a.createElement(ue,{currencies:ie}),r.a.createElement(u.b,{to:"/settings"},"Settings"))};var se=function(){return r.a.createElement(P,null,r.a.createElement("div",{className:"bg-gray-200","data-testid":"app"},r.a.createElement("div",{className:"container min-h-screen p-2 box-border mx-auto relative text-center"},r.a.createElement(u.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/exchange"},r.a.createElement(le,null)),r.a.createElement(i.a,{path:"/welcome"},r.a.createElement(h,null)),r.a.createElement(i.a,{path:"/"},r.a.createElement(v,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.7ca74425.chunk.js.map