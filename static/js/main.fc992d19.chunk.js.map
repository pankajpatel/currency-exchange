{"version":3,"sources":["components/styled/Button.ts","components/styled/Nav.ts","components/styled/ScreenCentered.ts","components/styled/FlexContainer.ts","components/styled/Container.ts","components/styled/Links.ts","pages/Home/Home.tsx","pages/Welcome/Welcome.tsx","reducers/rates.reducer.ts","config.ts","data/fetch.ts","data/rates.ts","reducers/settings.reducer.ts","data/localStorage.ts","data/settings.ts","Contexts/Settings.tsx","Contexts/Rates.tsx","components/ExchangeForm/styled.ts","components/ExchangeSeparator/styled.ts","components/ExchangeSeparator/ExchangeSeparator.tsx","components/Select/Select.tsx","components/AmountInput/AmountInput.tsx","components/ExchangeParticipant/ExchangeParticipant.tsx","reducers/exchange.reducer.ts","helpers/formatNumber.ts","components/ExchangeForm/ExchangeForm.tsx","pages/Exchange/Exchange.tsx","pages/Transactions/Transactions.tsx","pages/Balance/Balance.tsx","pages/Settings/Settings.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["getClassNames","type","Button","styled","button","attrs","props","className","nav","ScreenCentered","div","FlexContainer","Container","width","ListContainer","List","ul","ListItem","li","Home","data-testid","as","Link","to","Welcome","initialState","currency","loading","rates","ratesReducer","state","action","payload","ENDPOINTS","RATES","CURRENCIES","API","request","_url","method","body","url","headers","Headers","append","params","includes","JSON","stringify","fetch","then","response","status","json","getRates","from","search","URLSearchParams","api","toString","base","poll","currencies","balances","EUR","GBP","USD","transactions","settingsReducer","amount","fromBalance","toBalance","fromAmount","toAmount","updates","timestamp","Number","Date","KEY","STORE","window","localStorage","getData","key","_data","getItem","data","parse","value","setItem","saveSettings","LS","SettingsContext","React","createContext","settings","updateSettings","exchangeAmount","Provider","SettingsProvider","Consumer","children","useReducer","dispatch","useEffect","getSettings","saveAppState","RatesContext","updateBaseCurrency","RatesProvider","useContext","SettingContext","useState","baseCurrency","setBaseCurrency","ratesData","timeout","useRef","newPoll","current","setTimeout","a","clearTimeout","InfoContainer","Balance","Message","Separator","SeparatorButton","CurrencySwitch","ExchangeSeparator","values","onSwitchClick","onClick","HTMLSelect","select","Select","onChange","defaultValue","target","map","Input","input","AmountInput","placeholder","ExchangeCurrency","ExchangeParticipant","onCurrencyChange","onAmountChange","toFixed","e","isNaN","rate","exchangeReducer","formatNumber","num","precision","ExchangeForm","history","useHistory","message","exchangeData","Object","keys","balance","exchangeInfo","onSubmit","preventDefault","reset","push","CURRENCY_MAP","Exchange","Transactions","transaction","index","coll","length","toLocaleString","col","classNames","position","Settings","join","App","path","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.fc992d19.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nconst getClassNames = (type?: string): string => {\n  switch (type) {\n    case \"outline\":\n      return \"bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded\";\n    default:\n      return \"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\";\n  }\n};\n\ntype Props = {\n  type?: string;\n};\n\nexport const Button = styled.button.attrs((props: Props) => ({\n  className: getClassNames(props.type),\n}))``;\n","import styled from \"styled-components\";\n\nexport const Nav = styled.nav``;\n","import styled from \"styled-components\";\n\nexport const ScreenCentered = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translateX(-50%) translateY(-50%);\n`;","import styled from \"styled-components\";\n\nexport const FlexContainer = styled.div`\n  display: flex;\n  align-items: center;\n  & > * {\n    flex: 1 auto;\n    width: 50%;\n  }\n`;\n","import styled from \"styled-components\";\n\nexport const Container = styled.div<{ width?: string }>`\n  max-width: ${(props) => props.width || \"320px\"};\n  width: ${(props) => props.width || \"auto\"};\n  padding: 1rem 0;\n  border: 1px solid #efefef;\n  border-radius: 10px;\n  box-shadow: 0 0 10px 0 rgba(100, 100, 100, 0.3);\n`;\n","import styled from \"styled-components\";\n\nexport const ListContainer = styled.div`\n  display: table;\n  width: auto;\n  margin: 0.5rem auto;\n  border-collapse: collapse;\n`;\nexport const List = styled.ul`\n  border-radius: 5px;\n  border: 1px solid #dedede;\n  list-style: none;\n  padding: 0;\n  display: table-row;\n`;\nexport const ListItem = styled.li`\n  display: inline-block;\n  border: 1px solid #dedede;\n  padding: 0.3rem 0.8rem;\n  display: table-cell;\n`;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button, ScreenCentered } from \"../../components/styled\";\n\nexport const Home = () => {\n  return (\n    <ScreenCentered data-testid=\"home\">\n      <Button as={Link} to=\"/welcome\" className=\"block m-2\">\n        Start\n      </Button>\n    </ScreenCentered>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button, ScreenCentered } from \"../../components/styled\";\n\nexport const Welcome = () => {\n  return (\n    <ScreenCentered>\n      <header>\n        <h1 className=\"text-4xl pb-2\">Welcome to Currency Exchange</h1>\n      </header>\n      <section className=\"text-center p-2\">\n        <p>Please select your preferred Currency in settings.</p>\n        <p>\n          We have set it ourselves to EUR and credited your account some initial\n          fund to play with the app\n        </p>\n\n        <small className=\"block italic\">\n          P.S. This fund can not be used to do any real purchase\n        </small>\n      </section>\n\n      <Button as={Link} to=\"/exchange\" className=\"m-2 inline-block\">\n        Exchange\n      </Button>\n    </ScreenCentered>\n  );\n};\n","import { RatesState, Action, Reducer } from \"../types\";\n\nexport const initialState: RatesState = {\n  currency: \"EUR\",\n  loading: false,\n  rates: {},\n};\n\nexport const ratesReducer: Reducer<RatesState, Action> = (\n  state = initialState,\n  action\n) => {\n  const { type, payload } = action;\n  switch (type) {\n    case \"RATES_LOADING\":\n      return {\n        ...state,\n        loading: true,\n      };\n    case \"RATES_RECEIVED\":\n      return {\n        ...state,\n        loading: false,\n        ...payload,\n      };\n    case \"BASE_CURRENCY_CHANGED\":\n      return {\n        ...state,\n        ...payload,\n      };\n    default:\n      return state;\n  }\n};\n","type Config = Record<string, string>;\n\nexport const NAMESPACE: string = \"currency-exchange\";\n\nexport const ENDPOINTS: Config = {\n  RATES: \"/latest\",\n  CURRENCIES: \"/currencies\",\n};\n\nexport const API: Record<string, string | Config> = {\n  REMOTE: \"//api.frankfurter.app\",\n  ENDPOINTS,\n  NAMESPACE,\n};\n","import { API } from \"../config\";\nimport { RatesResponse } from \"../types\";\n\nconst request = (\n  _url: string,\n  method = \"GET\",\n  body: BodyInit = \"\"\n): Promise<RatesResponse> => {\n  const url = `${API.REMOTE}${_url}`;\n  const headers = new Headers();\n  headers.append(\"Content-Type\", \"application/json\");\n  const params: RequestInit = {\n    method,\n    headers: headers,\n  };\n  if ([\"POST\", \"PUT\"].includes(method)) {\n    params.body = typeof body !== \"string\" ? JSON.stringify(body) : body;\n  }\n\n  return fetch(url, params).then((response) => {\n    const { status } = response;\n    if (status === 204) {\n      return {};\n    }\n    return response.json();\n  });\n};\n\nexport const getData = (url: string): Promise<RatesResponse> =>\n  request(url, \"GET\");\nexport const postData = (url: string, data: BodyInit) =>\n  request(url, \"POST\", data);\nexport const putData = (url: string, data: BodyInit) =>\n  request(url, \"PUT\", data);\nexport const deleteData = (url: string) => request(url, \"DELETE\");\n\nexport default {\n  get: getData,\n  post: postData,\n  put: putData,\n  delete: deleteData,\n};\n","import api from \"./fetch\";\nimport { ENDPOINTS } from \"../config\";\nimport { RatesResponse } from \"../types\";\n\nexport const getRates = (currency: string = \"\"): Promise<RatesResponse> => {\n  const params: Record<string, string> = {};\n  if (currency) {\n    params.from = currency;\n  }\n  const search = new URLSearchParams(params);\n\n  return api.get(`${ENDPOINTS.RATES}?${search.toString()}`);\n};\n","import { Reducer, Settings, Action, ExchangeParams } from \"../types\";\n\nexport const initialState: Settings = {\n  base: \"EUR\",\n  poll: 10 * 1000,\n  currencies: [\"EUR\", \"GBP\", \"USD\"],\n  balances: {\n    EUR: 100,\n    GBP: 0,\n    USD: 0,\n  },\n  transactions: [],\n};\n\nexport const settingsReducer: Reducer<Settings, Action> = (\n  state = initialState,\n  action\n) => {\n  const { type, payload } = action;\n  const { balances, transactions = [] } = state;\n  switch (type) {\n    case \"SETTINGS_UPDATED\":\n      return {\n        ...state,\n        ...payload,\n      };\n    case \"EXCHANGE_INITIATED\":\n      if (!payload?.from.amount || payload?.from.amount <= 0) {\n        return state;\n      }\n      if (!payload?.from.currency || !payload?.to.currency) {\n        return state;\n      }\n      const fromBalance = balances[payload?.from.currency];\n      if (fromBalance < payload?.from.amount) {\n        return state;\n      }\n      const toBalance = balances[payload?.to.currency];\n      const fromAmount = payload?.from.amount;\n      const toAmount = payload?.to.amount;\n      const updates = {\n        balances: {\n          [payload?.from.currency]: fromBalance - fromAmount,\n          [payload?.to.currency]: toBalance + toAmount,\n        },\n        transactions: [\n          {\n            ...(payload as ExchangeParams),\n            timestamp: Number(new Date()),\n          },\n          ...transactions,\n        ],\n      };\n      return { ...state, ...updates };\n    default:\n      return state;\n  }\n};\n","import { NAMESPACE } from \"../config\";\n\nconst KEY = NAMESPACE as string;\nconst STORE = window.localStorage;\n\nconst getData = (key: string | null = null): any => {\n  const _data = STORE.getItem(KEY);\n  const data = _data ? JSON.parse(_data) : {};\n  return key ? data[key] : data;\n};\n\nconst setData = (key: string, value: any): void => {\n  STORE.setItem(\n    KEY,\n    JSON.stringify({\n      ...getData(),\n      [key]: value,\n    })\n  );\n};\n\nexport default {\n  get: getData,\n  set: setData,\n  remove: (key: string) => {\n    if (!key) {\n      return;\n    }\n    const data = getData();\n    delete data[key];\n    STORE.setItem(KEY, JSON.stringify(data));\n  },\n};\n","import LS from \"./localStorage\";\nimport { Settings } from \"../types\";\n\nexport const getSettings = (key: string | null = null): Settings => LS.get(key);\nexport const saveSettings = (key: string, value: any): void => {\n  LS.set(key, value);\n};\n","import React, { useReducer, useEffect, PropsWithChildren } from \"react\";\nimport { settingsReducer, initialState } from \"../reducers/settings.reducer\";\nimport { SettingsContextType, ExchangeParams, Settings } from \"../types\";\nimport { getSettings, saveSettings } from \"../data/settings\";\n\nconst SettingsContext = React.createContext<SettingsContextType>({\n  settings: initialState,\n  updateSettings: () => {},\n  exchangeAmount: () => {},\n});\n\nconst { Provider, Consumer } = SettingsContext;\n\nexport const SettingsProvider = ({ children }: PropsWithChildren<{}>) => {\n  const [settings, dispatch] = useReducer(settingsReducer, initialState);\n  const saveAppState = (data: Settings) => {\n    const timestamp = Number(new Date());\n    saveSettings(\"app\", data);\n    saveSettings(\"timestamp\", timestamp);\n  };\n\n  useEffect(() => {\n    updateSettings(getSettings(\"app\"));\n  }, []);\n\n  useEffect(() => {\n    saveAppState(settings);\n  }, [settings]);\n\n  const updateSettings = (payload: object) => {\n    dispatch({\n      type: \"SETTINGS_UPDATED\",\n      payload,\n    });\n  };\n  const exchangeAmount = (params: ExchangeParams) => {\n    dispatch({\n      type: \"EXCHANGE_INITIATED\",\n      payload: params,\n    });\n  };\n  const value = { settings, updateSettings, exchangeAmount };\n\n  return <Provider value={value}>{children}</Provider>;\n};\n\nexport const SettingsConsumer = Consumer;\n\nexport default SettingsContext;\n","import React, {\n  useRef,\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  PropsWithChildren,\n} from \"react\";\nimport { ratesReducer, initialState } from \"../reducers/rates.reducer\";\nimport { getRates } from \"../data/rates\";\nimport { RatesContextType } from \"../types\";\nimport SettingContext from \"./Settings\";\n\nconst RatesContext = React.createContext<RatesContextType>({\n  ...initialState,\n  updateBaseCurrency: () => {},\n});\n\nconst { Provider, Consumer } = RatesContext;\n\nexport const RatesProvider = ({ children }: PropsWithChildren<{}>) => {\n  const { settings } = useContext(SettingContext);\n  const [baseCurrency, setBaseCurrency] = useState<string>(settings.base);\n  const [ratesData, dispatch] = useReducer(ratesReducer, initialState);\n  const timeout = useRef<number>(0);\n\n  useEffect(() => {\n    const stopRunningPoll = () => {\n      timeout.current && clearTimeout(timeout.current);\n    };\n    const newPoll = () => {\n      timeout.current = setTimeout(poll, settings.poll);\n    };\n\n    const poll = () => {\n      dispatch({\n        type: \"RATES_LOADING\",\n      });\n      (async () => {\n        const { rates = {} } = await getRates(baseCurrency);\n        newPoll();\n        dispatch({\n          type: \"RATES_RECEIVED\",\n          payload: { rates, currency: baseCurrency },\n        });\n      })();\n    };\n\n    poll();\n\n    return stopRunningPoll;\n  }, [settings.poll, baseCurrency]);\n\n  return (\n    <Provider\n      value={{\n        ...ratesData,\n        updateBaseCurrency: setBaseCurrency,\n      }}\n    >\n      {children}\n    </Provider>\n  );\n};\n\nexport const RatesConsumer = Consumer;\nexport default RatesContext;\n","import styled from \"styled-components\";\nimport { FlexContainer } from \"../../components/styled\";\n\nexport const InfoContainer = styled(FlexContainer)`\n  font-size: 0.8rem;\n  opacity: 0.8;\n  padding: 0 1rem;\n`;\nexport const Balance = styled.div`\n  text-align: left;\n  padding-left: 0.4rem;\n`;\n\nexport const Message = styled.div`\n  text-align: right;\n  padding-right: 0.4rem;\n`;\n","import styled from \"styled-components\";\n\nexport const Separator = styled.div`\n  position: relative;\n  height: 1px;\n  margin: 2rem 0;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  background: #dfdfdf;\n`;\n\nexport const SeparatorButton = styled.button`\n  border: 1px solid #dfdfdf;\n  outline: none;\n  border-radius: 1rem;\n  padding: 0 0.5rem;\n  background: white;\n  transform: translateY(-50%);\n  margin-left: 15%;\n  &:focus,\n  &:active {\n    outline: none;\n    box-shadow: 0 0 5px 0 rgba(100, 100, 100, 0.2);\n  }\n`;\n\nexport const CurrencySwitch = styled(SeparatorButton)`\n  --size: 1.8rem;\n  width: var(--size);\n  height: var(--size);\n  line-height: var(--size);\n  border-radius: 50%;\n  position: absolute;\n  padding: 0;\n  left: 0;\n`;\n","import React from \"react\";\nimport { Separator, SeparatorButton, CurrencySwitch } from \"./styled\";\n\ntype Props = {\n  values: Record<string, string>;\n  onSwitchClick: Function;\n};\n\nexport const ExchangeSeparator = ({ values, onSwitchClick }: Props) => {\n  return (\n    <Separator data-testid=\"separator\">\n      <CurrencySwitch\n        onClick={() => onSwitchClick()}\n        data-testid=\"separator-switch-button\"\n      >\n        ⇅\n      </CurrencySwitch>\n      <SeparatorButton>\n        {values.from} → {values.to}\n      </SeparatorButton>\n    </Separator>\n  );\n};\n","import React, { ReactElement, ChangeEvent } from \"react\";\nimport styled from \"styled-components\";\n\nconst HTMLSelect = styled.select`\n  appearance: none;\n  -moz-appearance: none;\n  -webkit-appearance: none;\n  background: transparent;\n`;\n\ntype Props = {\n  currencies: string[];\n  value?: string;\n  onChange?: Function;\n};\n\nexport const Select = ({\n  currencies,\n  value = \"\",\n  onChange = () => {},\n}: Props): ReactElement => (\n  <div>\n    <HTMLSelect\n      data-testid=\"currency-select\"\n      defaultValue={value}\n      onChange={({ target: { value } }: ChangeEvent<HTMLSelectElement>) =>\n        onChange(value)\n      }\n    >\n      {currencies.map((currency) => (\n        <option key={currency}>{currency}</option>\n      ))}\n    </HTMLSelect>\n  </div>\n);\n","import React, { ReactElement, InputHTMLAttributes } from \"react\";\nimport styled from \"styled-components\";\n\nexport const Input = styled.input`\n  text-align: right;\n  position: relative;\n  &:before {\n    content: \"-\";\n    position: absolute;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n`;\n\nexport const AmountInput = (\n  props: InputHTMLAttributes<HTMLInputElement>\n): ReactElement => (\n  <div>\n    <Input type=\"tel\" placeholder=\"0\" {...props} data-testid=\"amount-input\" />\n  </div>\n);\n","import React, { ChangeEvent, PropsWithChildren } from \"react\";\nimport styled from \"styled-components\";\nimport { Select } from \"../Select/Select\";\nimport { AmountInput } from \"../AmountInput/AmountInput\";\nimport { ExchangeState } from \"../../types\";\nimport { FlexContainer } from \"../styled\";\n\nconst ExchangeCurrency = styled(FlexContainer)`\n  padding-left: 1rem;\n  padding-right: 1rem;\n  & input,\n  & select {\n    font-size: 2rem;\n    max-width: 100%;\n    display: block;\n    background: transparent;\n    outline: none;\n  }\n`;\n\nexport const ExchangeParticipant = ({\n  state,\n  currencies,\n  children = null,\n  onCurrencyChange = () => {},\n  onAmountChange = () => {},\n}: PropsWithChildren<{\n  state: ExchangeState;\n  currencies: string[];\n  onCurrencyChange?: Function;\n  onAmountChange?: Function;\n}>) => {\n  const value = state.amount ? Number(state.amount.toFixed(2)) : \"\";\n  return (\n    <>\n      <ExchangeCurrency data-testid=\"exchange-participant\">\n        <Select\n          key={state.currency}\n          value={state.currency}\n          currencies={currencies}\n          onChange={onCurrencyChange}\n        />\n        <AmountInput\n          defaultValue={value}\n          onChange={(e: ChangeEvent<HTMLInputElement>) => {\n            const value = Number(e.target.value);\n            if (isNaN(value)) {\n              return;\n            }\n            onAmountChange(value);\n          }}\n        />\n      </ExchangeCurrency>\n      {children}\n    </>\n  );\n};\n","import { ExchangeState, Action, Reducer } from \"../types\";\n\nexport const initialState: Record<string, ExchangeState | null | number> = {\n  from: {\n    amount: null,\n    currency: \"EUR\",\n  },\n  to: {\n    amount: null,\n    currency: \"GBP\",\n  },\n  rate: null,\n};\n\nexport const exchangeReducer: Reducer<Record<string, any>, Action> = (\n  state = initialState,\n  action\n) => {\n  const { type, payload = {} } = action;\n  const value = payload.value;\n  const rate = state.rate || 0;\n  switch (type) {\n    case \"EXCHANGE_SWITCHED\":\n      return {\n        ...state,\n        from: state.to,\n        to: state.from,\n      };\n    case \"BASE_CURRENCY_UPDATED\":\n      return {\n        ...state,\n        to:\n          state.to.currency === value\n            ? {\n                amount: state.to.amount,\n                currency: state.from.currency,\n              }\n            : state.to,\n        from: {\n          ...state.from,\n          currency: value,\n        },\n      };\n    case \"SECONDARY_CURRENCY_UPDATED\":\n      return {\n        ...state,\n        from:\n          state.from.currency === value\n            ? {\n                amount: state.from.amount,\n                currency: state.to.currency,\n              }\n            : state.from,\n        to: {\n          ...state.to,\n          currency: value,\n        },\n      };\n    case \"BASE_AMOUNT_UPDATED\":\n      return {\n        ...state,\n        from: {\n          ...state.from,\n          amount: isNaN(value) ? 0 : value,\n        },\n        to: {\n          ...state.to,\n          amount: rate ? value * rate : state.to.amount,\n        },\n      };\n    case \"SECONDARY_AMOUNT_UPDATED\":\n      return {\n        ...state,\n        from: {\n          ...state.from,\n          amount: rate ? value / rate : state.from.amount,\n        },\n        to: {\n          ...state.to,\n          amount: isNaN(value) ? 0 : value,\n        },\n      };\n    case \"RATES_UPDATED\":\n      return {\n        ...state,\n        rate: payload.rates[state.to.currency] || rate,\n      };\n    case \"RESET_EXCHANGE\":\n      return {\n        ...state,\n        from: {\n          ...state.from,\n          amount: 0,\n        },\n        to: {\n          ...state.to,\n          amount: 0,\n        },\n      };\n    default:\n      return state;\n  }\n};\n","const formatNumber = (\n  num: number | null | undefined = 0,\n  precision = 4\n): string => Number(num).toFixed(precision);\n\nexport default formatNumber;\n","import React, {\n  useContext,\n  useReducer,\n  useEffect,\n  FormEventHandler,\n} from \"react\";\nimport { RouteProps, useHistory } from \"react-router-dom\";\nimport RatesContext from \"../../Contexts/Rates\";\nimport SettingsContext from \"../../Contexts/Settings\";\nimport { Button, ScreenCentered, Container } from \"../styled\";\nimport { InfoContainer, Message, Balance } from \"./styled\";\nimport { RatesContextType, SettingsContextType } from \"../../types\";\nimport { ExchangeSeparator } from \"../ExchangeSeparator/ExchangeSeparator\";\nimport { ExchangeParticipant } from \"../ExchangeParticipant/ExchangeParticipant\";\nimport { exchangeReducer, initialState } from \"../../reducers/exchange.reducer\";\nimport formatNumber from \"../../helpers/formatNumber\";\n\ntype Props = {\n  currencies: Record<string, string>;\n} & RouteProps;\n\nexport const ExchangeForm = ({ currencies }: Props) => {\n  const history = useHistory();\n  const ratesData = useContext<RatesContextType>(RatesContext);\n  const { settings, exchangeAmount } = useContext<SettingsContextType>(\n    SettingsContext\n  );\n  let message: string | null = null;\n  const [exchangeData, dispatch] = useReducer(exchangeReducer, {\n    ...initialState,\n    from: {\n      currency: settings.base,\n      amount: null,\n    },\n  });\n\n  useEffect(() => {\n    dispatch({\n      type: \"RATES_UPDATED\",\n      payload: { rates: ratesData.rates },\n    });\n  }, [ratesData]);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET_EXCHANGE\" });\n  }, [settings.balances]);\n\n  const CURRENCIES = Object.keys(currencies);\n  const balance = settings.balances[exchangeData.from.currency];\n\n  if (exchangeData.from.amount > balance) {\n    message = \"Insufficient Balance\";\n  }\n\n  const switchCurrencies = () => {\n    ratesData.updateBaseCurrency(exchangeData.to.currency);\n    dispatch({ type: \"EXCHANGE_SWITCHED\" });\n  };\n\n  const updateBaseCurrency = (value: string) => {\n    ratesData.updateBaseCurrency(value);\n    dispatch({\n      type: \"BASE_CURRENCY_UPDATED\",\n      payload: { value },\n    });\n  };\n  const updateSecondaryCurrency = (value: string) => {\n    dispatch({\n      type: \"SECONDARY_CURRENCY_UPDATED\",\n      payload: { value },\n    });\n  };\n  const updateBaseAmount = (value: number) => {\n    dispatch({\n      type: \"BASE_AMOUNT_UPDATED\",\n      payload: { value },\n    });\n  };\n  const updateSecondaryAmount = (value: number) => {\n    dispatch({\n      type: \"SECONDARY_AMOUNT_UPDATED\",\n      payload: { value },\n    });\n  };\n\n  const makeExchange: FormEventHandler<HTMLFormElement> = (e) => {\n    e.preventDefault();\n    exchangeAmount(exchangeData);\n    (e.target as HTMLFormElement).reset();\n    history.push(\"/transactions\");\n  };\n\n  const exchangeInfo =\n    ratesData.loading && !exchangeData.rate\n      ? {\n          from: \"⋅⋅⋅\",\n          to: \"⋅⋅⋅\",\n        }\n      : {\n          from: `${currencies[exchangeData.from.currency]} 1`,\n          to: `${currencies[exchangeData.to.currency]} ${formatNumber(\n            exchangeData.rate\n          )}`,\n        };\n\n  return (\n    <ScreenCentered>\n      <form onSubmit={makeExchange} data-testid=\"exchange-form\">\n        <Container>\n          <ExchangeParticipant\n            state={exchangeData.from}\n            currencies={CURRENCIES}\n            onCurrencyChange={updateBaseCurrency}\n            onAmountChange={updateBaseAmount}\n          >\n            <InfoContainer>\n              <Balance>Balance: {formatNumber(balance)}</Balance>\n              <Message>{message || \"\"}</Message>\n            </InfoContainer>\n          </ExchangeParticipant>\n          <ExchangeSeparator\n            values={exchangeInfo}\n            onSwitchClick={switchCurrencies}\n          />\n          <ExchangeParticipant\n            state={exchangeData.to}\n            currencies={CURRENCIES}\n            onCurrencyChange={updateSecondaryCurrency}\n            onAmountChange={updateSecondaryAmount}\n          >\n            <InfoContainer>\n              <Balance>\n                Balance:{\" \"}\n                {formatNumber(settings.balances[exchangeData.to.currency])}\n              </Balance>\n            </InfoContainer>\n          </ExchangeParticipant>\n          <Button className=\"m-2 inline-block\" type=\"submit\">\n            Exchange\n          </Button>\n        </Container>\n      </form>\n    </ScreenCentered>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { RatesProvider } from \"../../Contexts/Rates\";\nimport { ExchangeForm } from \"../../components/ExchangeForm/ExchangeForm\";\nimport { ListContainer, List, ListItem } from \"../../components/styled\";\n\nconst CURRENCY_MAP = {\n  EUR: \"€\",\n  GBP: \"£\",\n  USD: \"$\",\n};\n\nexport const Exchange = () => (\n  <RatesProvider>\n    <ExchangeForm currencies={CURRENCY_MAP} />\n    <ListContainer>\n      <List>\n        <ListItem>\n          <Link to=\"/settings\">Settings</Link>\n        </ListItem>\n        <ListItem>\n          <Link to=\"/transactions\">Transactions</Link>\n        </ListItem>\n      </List>\n    </ListContainer>\n  </RatesProvider>\n);\n","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport SettingsContext from \"../../Contexts/Settings\";\nimport { SettingsContextType } from \"../../types\";\nimport {\n  ScreenCentered,\n  Container,\n  ListContainer,\n  List,\n  ListItem,\n} from \"../../components/styled\";\n\nexport const Transactions = () => {\n  const { settings } = useContext<SettingsContextType>(SettingsContext);\n  return (\n    <ScreenCentered>\n      <header>\n        <h1 className=\"text-4xl pb-2\">Transactions</h1>\n      </header>\n      <Container width={\"400px\"}>\n        {(settings?.transactions || []).map((transaction, index, coll) => (\n          <div\n            className={`flex flex-row p-2 justify-between items-end  ${\n              coll.length - 1 === index ? \"border-b-0\" : \"border-b-2\"\n            }`}\n            key={index}\n          >\n            <div>\n              <h3 className=\"text-2xl\">\n                {transaction.from.currency} → {transaction.to.currency}\n              </h3>\n              <span className=\"text-xs text-green-900 font-bold\">\n                {transaction.from.amount} x {transaction.rate} ={\" \"}\n                {transaction.to.amount}\n              </span>\n            </div>\n            <div className=\"text-xs text-gray-500\">\n              on {new Date(transaction.timestamp).toLocaleString()}\n            </div>\n          </div>\n        ))}\n      </Container>\n\n      <ListContainer>\n        <List>\n          <ListItem>\n            <Link to=\"/settings\">Settings</Link>\n          </ListItem>\n          <ListItem>\n            <Link to=\"/exchange\">Exchange</Link>\n          </ListItem>\n        </List>\n      </ListContainer>\n    </ScreenCentered>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  ListContainer,\n  List,\n  ListItem,\n  ScreenCentered,\n  Container,\n} from \"../../components/styled\";\nimport SettingsContext from \"../../Contexts/Settings\";\nimport { SettingsContextType } from \"../../types\";\n\nconst getClassNames = (index: number, length: number) => {\n  let position = \"middle\";\n  if (index === 0) {\n    position = \"start\";\n  }\n  if (index === length - 1) {\n    position = \"last\";\n  }\n  switch (position) {\n    case \"start\":\n      return \"flex flex-row px-3 pb-2 justify-between items-end border-b-2\";\n    case \"last\":\n      return \"flex flex-row px-3 pt-2 justify-between items-end\";\n    default:\n      return \"flex flex-row px-3 py-2 justify-between items-end border-b-2\";\n  }\n};\n\nexport const Balance = () => {\n  const { settings } = useContext<SettingsContextType>(SettingsContext);\n  return (\n    <ScreenCentered>\n      <header>\n        <h1 className=\"text-4xl pb-2\">Balance</h1>\n        <p>\n          We have set it ourselves to EUR and credited your account some initial\n          fund to play with the app\n        </p>\n      </header>\n      <Container width=\"400px\">\n        {settings.currencies.map((currency, index, col) => {\n          const classNames = getClassNames(index, col.length);\n          return (\n            <div className={classNames} key={currency}>\n              <div>{currency}</div>\n              <div className=\"text-sm text-gray-900 font-bold\">\n                {settings.balances[currency] || 0}\n              </div>\n            </div>\n          );\n        })}\n      </Container>\n      <ListContainer>\n        <List>\n          <ListItem>\n            <Link to=\"/exchange\">Exchange</Link>\n          </ListItem>\n          <ListItem>\n            <Link to=\"/settings\">Settings</Link>\n          </ListItem>\n          <ListItem>\n            <Link to=\"/transactions\">Transactions</Link>\n          </ListItem>\n        </List>\n      </ListContainer>\n    </ScreenCentered>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  ListContainer,\n  List,\n  ListItem,\n  ScreenCentered,\n  Container,\n} from \"../../components/styled\";\nimport SettingsContext from \"../../Contexts/Settings\";\nimport { SettingsContextType } from \"../../types\";\n\nexport const Settings = () => {\n  const { settings } = useContext<SettingsContextType>(SettingsContext);\n  return (\n    <ScreenCentered>\n      <header>\n        <h1 className=\"text-4xl pb-2\">Settings</h1>\n      </header>\n      <Container width=\"300px\">\n        <div className=\"flex flex-row px-3 pb-2 justify-between items-end border-b-2\">\n          <div>Base Currency</div>\n          <div className=\"text-sm text-gray-900 font-bold\">{settings.base}</div>\n        </div>\n        <div className=\"flex flex-row px-3 py-2 justify-between items-end border-b-2\">\n          <div>Rate Refresh Interval</div>\n          <div className=\"text-sm text-gray-900 font-bold\">\n            {settings.poll / 1000}s\n          </div>\n        </div>\n        <div className=\"flex flex-row px-3 pt-2 justify-between items-end\">\n          <div>Currencies</div>\n          <div className=\"text-sm text-gray-900 font-bold\">\n            {settings.currencies.join(\", \")}\n          </div>\n        </div>\n      </Container>\n      <ListContainer>\n        <List>\n          <ListItem>\n            <Link to=\"/exchange\">Exchange</Link>\n          </ListItem>\n          <ListItem>\n            <Link to=\"/balance\">Balances</Link>\n          </ListItem>\n          <ListItem>\n            <Link to=\"/transactions\">Transactions</Link>\n          </ListItem>\n        </List>\n      </ListContainer>\n    </ScreenCentered>\n  );\n};\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { Home } from \"./pages/Home/Home\";\nimport { Welcome } from \"./pages/Welcome/Welcome\";\nimport { Exchange } from \"./pages/Exchange/Exchange\";\nimport { Transactions } from \"./pages/Transactions/Transactions\";\nimport { Balance } from \"./pages/Balance/Balance\";\nimport { Settings } from \"./pages/Settings/Settings\";\nimport { SettingsProvider } from \"./Contexts/Settings\";\n\nfunction App() {\n  return (\n    <SettingsProvider>\n      <div className=\"bg-gray-200\" data-testid=\"app\">\n        <div className=\"container min-h-screen p-2 box-border mx-auto relative text-center\">\n          <Router>\n            <Switch>\n              <Route path=\"/transactions\">\n                <Transactions />\n              </Route>\n              <Route path=\"/settings\">\n                <Settings />\n              </Route>\n              <Route path=\"/balance\">\n                <Balance />\n              </Route>\n              <Route path=\"/exchange\">\n                <Exchange />\n              </Route>\n              <Route path=\"/welcome\">\n                <Welcome />\n              </Route>\n              <Route path=\"/\">\n                <Home />\n              </Route>\n            </Switch>\n          </Router>\n        </div>\n      </div>\n    </SettingsProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}